upstream frontend {
	server frontend:80;
}
upstream portainer {
	server portainer:9000;
}
upstream  phpmyadmin{
	server phpmyadmin:80;
}
upstream  ombi{
	server ombi:3579;
}
upstream  radarr{
	server radarr:7878;
}
upstream  hydra{
	server hydra:5076;
}
upstream  lidarr{
	server lidarr:8686;
}
upstream  jackett{
	server jackett:9117;
}
upstream  sonarr{
	server sonarr:8989;
}
upstream qbittorrent{
	server qbittorrent:9091;
}
upstream sabnzbd{
	server sabnzbd:8080;
}
upstream emby{
	server emby:8096;
}
upstream nextcloud{
	server nextcloud:443;
}
upstream kibana{
	server 192.168.1.10:5601;
}
upstream prometheus{
	server 192.168.1.10:9091;
}
upstream grafana{
	server 192.168.1.10:3000;
}

upstream piwigo{
	server piwigo;
}
server {
	listen 80;
	server_name home.gouws.com;
	location / {
		proxy_pass http://frontend;
	}
}
server {
	listen 80;
	server_name kibana.home.gouws.com;
	location / {
		proxy_pass http://kibana;
		proxy_buffering                         off;
		proxy_set_header Host                   $http_host;
		proxy_set_header X-Real-IP              $remote_addr;
		proxy_set_header X-Forwarded-For        $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto      $scheme;
		satisfy any;
		allow 192.168.0.0/16;
		allow 172.16.0.0/12;
		allow 10.0.0.0/8;
		deny all;
		auth_basic                              "Username and Password Required";
		auth_basic_user_file                    /etc/nginx/password/.htpasswd;		
	}
}
server {
	listen 80;
	server_name prometheus.home.gouws.com;
	location / {
		proxy_pass http://prometheus;
		proxy_buffering                         off;
		proxy_set_header Host                   $http_host;
		proxy_set_header X-Real-IP              $remote_addr;
		proxy_set_header X-Forwarded-For        $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto      $scheme;
		satisfy any;
		allow 192.168.0.0/16;
		allow 172.16.0.0/12;
		allow 10.0.0.0/8;
		deny all;
		auth_basic                              "Username and Password Required";
		auth_basic_user_file                    /etc/nginx/password/.htpasswd;		
	}
}
server {
	listen 80;
	server_name grafana.home.gouws.com;
	location / {
		proxy_pass http://grafana;
		proxy_buffering                         off;
		proxy_set_header Host                   $http_host;
		proxy_set_header X-Real-IP              $remote_addr;
		proxy_set_header X-Forwarded-For        $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto      $scheme;
	}
}

server {
	listen 80;
	server_name photo.home.gouws.com;
	location / {
		proxy_pass http://piwigo;
		proxy_buffering                         off;
		proxy_set_header Host                   $http_host;
		proxy_set_header X-Real-IP              $remote_addr;
		proxy_set_header X-Forwarded-For        $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto      $scheme;
		# satisfy any;
		# allow 192.168.0.0/16;
		# allow 172.16.0.0/12;
		# allow 10.0.0.0/8;
		# deny all;
		# auth_basic                              "Username and Password Required";
		# auth_basic_user_file                    /etc/nginx/password/.htpasswd;		
	}
}
server {
	listen 80;
	server_name ombi.home.gouws.com;
	location / {
		proxy_pass http://ombi;
	}
}
server {
	listen 80;
	server_name radarr.home.gouws.com;
	location / {
		proxy_pass http://radarr;
		proxy_buffering                         off;
		proxy_set_header Host                   $http_host;
		proxy_set_header X-Real-IP              $remote_addr;
		proxy_set_header X-Forwarded-For        $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto      $scheme;
		satisfy any;
		allow 192.168.0.0/16;
		allow 172.16.0.0/12;
		allow 10.0.0.0/8;
		deny all;
		auth_basic                              "Username and Password Required";
		auth_basic_user_file                    /etc/nginx/password/.htpasswd;
	}
}
server {
	listen 80;
	server_name hydra.home.gouws.com;
	location / {
		proxy_pass http://hydra;
		proxy_buffering                         off;
		proxy_set_header Host                   $http_host;
		proxy_set_header X-Real-IP              $remote_addr;
		proxy_set_header X-Forwarded-For        $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto      $scheme;
		satisfy any;
		allow 192.168.0.0/16;
		allow 172.16.0.0/12;
		allow 10.0.0.0/8;
		deny all;
		auth_basic                              "Username and Password Required";
		auth_basic_user_file                    /etc/nginx/password/.htpasswd;

	}
}
server {
	listen 80;
	server_name lidarr.home.gouws.com;
	location / {
		proxy_pass http://lidarr;
		proxy_buffering                         off;
		proxy_set_header Host                   $http_host;
		proxy_set_header X-Real-IP              $remote_addr;
		proxy_set_header X-Forwarded-For        $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto      $scheme;
		satisfy any;
		allow 192.168.0.0/16;
		allow 172.16.0.0/12;
		allow 10.0.0.0/8;
		deny all;		
		auth_basic                              "Username and Password Required";
		auth_basic_user_file                    /etc/nginx/password/.htpasswd;

	}
}
server {
	listen 80;
	server_name jackett.home.gouws.com;
	location / {
		proxy_pass http://jackett;
		proxy_buffering                         off;
		proxy_set_header Host                   $http_host;
		proxy_set_header X-Real-IP              $remote_addr;
		proxy_set_header X-Forwarded-For        $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto      $scheme;
		satisfy any;
		allow 192.168.0.0/16;
		allow 172.16.0.0/12;
		allow 10.0.0.0/8;		
		deny all;
		auth_basic                              "Username and Password Required";
		auth_basic_user_file                    /etc/nginx/password/.htpasswd;
	}
}
server {
	listen 80;
	server_name sonarr.home.gouws.com;
	location / {
		proxy_pass http://sonarr;
		proxy_buffering                         off;
		proxy_set_header Host                   $http_host;
		proxy_set_header X-Real-IP              $remote_addr;
		proxy_set_header X-Forwarded-For        $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto      $scheme;
		satisfy any;
		allow 192.168.0.0/16;
		allow 172.16.0.0/12;
		allow 10.0.0.0/8;
		deny all;		
		auth_basic                              "Username and Password Required";
		auth_basic_user_file                    /etc/nginx/password/.htpasswd;

	}
}
server {
	listen 80;
	server_name phpmyadmin.home.gouws.com;
	location / {
		proxy_pass http://phpmyadmin;
		proxy_buffering                         off;
		proxy_set_header Host                   $http_host;
		proxy_set_header X-Real-IP              $remote_addr;
		proxy_set_header X-Forwarded-For        $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto      $scheme;		
	}
}
server {
	listen 80;
	server_name portainer.home.gouws.com;
	location / {
		proxy_pass http://portainer;
	    proxy_http_version 1.1;
    	proxy_set_header Upgrade $http_upgrade;
    	proxy_set_header Connection "Upgrade";
		proxy_buffering                         off;
		proxy_set_header Host                   $http_host;
		proxy_set_header X-Real-IP              $remote_addr;
		proxy_set_header X-Forwarded-For        $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto      $scheme;		
	}
}
server {
	listen 80;
	server_name qbittorrent.home.gouws.com;
	location / {
		proxy_pass http://qbittorrent;
    	proxy_set_header        X-Forwarded-Host        $server_name:$server_port;
    	proxy_hide_header       Referer;
    	proxy_hide_header       Origin;
    	proxy_set_header        Referer                 '';
    	proxy_set_header        Origin                  '';
    	proxy_hide_header       x-frame-options;
	}
}
server {
	listen 80;
	server_name sabnzbd.home.gouws.com;
	location / {
		proxy_pass http://sabnzbd;
		proxy_buffering                         off;
	}
}
server {
	listen 80;
	server_name emby.home.gouws.com;
	location / {
		proxy_pass http://emby;
		proxy_buffering                         off;
	}
}
server {
	listen 80;
	server_name cloud.home.gouws.com;
	location / {
		proxy_pass https://nextcloud;
		proxy_buffering                         off;
		proxy_set_header Host                   $http_host;
		proxy_set_header X-Real-IP              $remote_addr;
		proxy_set_header X-Forwarded-For        $proxy_add_x_forwarded_for;
		proxy_set_header X-Forwarded-Proto      $scheme;

	}
}
# server {
# 	listen 443 ssl http2;
# 	server_name cloud.home.gouws.com;
# 	location / {
# 		proxy_pass https://nextcloud;
# 		proxy_buffering                         off;
# 		proxy_set_header Host                   $http_host;
# 		proxy_set_header X-Real-IP              $remote_addr;
# 		proxy_set_header X-Forwarded-For        $proxy_add_x_forwarded_for;
# 		proxy_set_header X-Forwarded-Proto      $scheme;

# 	}

# }